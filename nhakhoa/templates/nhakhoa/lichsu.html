{% extends 'nhakhoa/base.html' %}
{% load static %}

{% block title %}L·ªãch s·ª≠ kh√°m b·ªánh{% endblock %}

{% block content %}
<div class="container" style="padding: 50px 20px; min-height: 80vh;">
    
    <h2 style="color: #0d6efd; margin-bottom: 30px; border-left: 5px solid #0d6efd; padding-left: 15px;">
        üìú L·ªãch s·ª≠ ƒë·∫∑t h·∫πn c·ªßa b·∫°n
    </h2>

    <div style="background: white; border-radius: 15px; box-shadow: 0 5px 15px rgba(0,0,0,0.05); overflow: hidden;">
        <table class="table table-hover" style="margin-bottom: 0;">
            <thead style="background: #f8f9fa;">
                <tr>
                    <th scope="col" style="padding: 15px;">M√£ phi·∫øu</th>
                    <th scope="col" style="padding: 15px;">Ng√†y h·∫πn</th>
                    <th scope="col" style="padding: 15px;">D·ªãch v·ª•</th>
                    <th scope="col" style="padding: 15px;">Chi nh√°nh</th>
                    <th scope="col" style="padding: 15px;">Tr·∫°ng th√°i</th>
                    <th scope="col" style="padding: 15px; text-align: center;">Thao t√°c</th>
                </tr>
            </thead>
            <tbody>
                {% for item in ds_lich %}
                <tr>
                    <td style="padding: 15px; font-weight: bold;">#{{ item.id }}</td>
                    <td style="padding: 15px;">{{ item.ngay_hen_mong_muon|date:"d/m/Y" }}</td>
                    <td style="padding: 15px; color: #d63384; font-weight: 500;">
                        {{ item.dich_vu.ten_dich_vu }}
                    </td>
                    <td style="padding: 15px;">{{ item.chi_nhanh.ten_chi_nhanh }}</td>
                    
                    <td style="padding: 15px;">
                        {% if item.trang_thai == 'cho_xac_nhan' %}
                            <span class="badge bg-warning text-dark">‚è≥ Ch·ªù x√°c nh·∫≠n</span>
                        {% elif item.trang_thai == 'da_xac_nhan' %}
                            <span class="badge bg-primary">‚úÖ ƒê√£ x√°c nh·∫≠n</span>
                        {% elif item.trang_thai == 'hoan_thanh' %}
                            <span class="badge bg-success">üéâ ƒê√£ kh√°m xong</span>
                        {% else %}
                            <span class="badge bg-secondary">ƒê√£ h·ªßy</span>
                        {% endif %}
                    </td>

                    <td style="padding: 15px; text-align: center;">
                        <a href="{% url 'xac_nhan_lich_hen' item.id %}" 
                           class="btn btn-sm btn-outline-primary"
                           style="border-radius: 20px;">
                           <i class="fas fa-map-marked-alt"></i> Xem l·∫°i phi·∫øu & B·∫£n ƒë·ªì
                        </a>
                    </td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="6" style="text-align: center; padding: 30px; color: #999;">
                        B·∫°n ch∆∞a c√≥ l·ªãch h·∫πn n√†o. <a href="{% url 'index' %}">ƒê·∫∑t l·ªãch ngay</a>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}